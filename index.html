<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>I have the most beautiful life with you</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&family=Pacifico&display=swap');

        :root {
            --primary: #ff4d6d;
            --secondary: #ff8fa3;
            --bg: #fff0f3;
            --text: #590d22;
            --white: #ffffff;
            --shadow-color: rgba(89, 13, 34, 0.2);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow-x: hidden;
        }

        h1, h2 {
            font-family: 'Pacifico', cursive;
            color: var(--primary);
            text-align: center;
            margin-bottom: 15px;
            line-height: 1.2;
        }

        p {
            line-height: 1.6;
            margin-bottom: 20px;
            text-align: center;
            max-width: 600px;
            font-size: 1.1rem;
        }

        /* --- Container --- */
        #game-container {
            width: 100%;
            max-width: 500px;
            background: var(--white);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px var(--shadow-color);
            position: relative;
            min-height: 500px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: height 0.3s ease;
        }

        /* --- Buttons --- */
        .btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            font-family: 'Nunito', sans-serif;
            font-weight: 700;
            transition: transform 0.2s, background-color 0.2s, opacity 0.3s;
            box-shadow: 0 4px 15px rgba(255, 77, 109, 0.4);
            margin-top: 10px;
        }

        .btn:hover {
            background-color: #d63352;
            transform: translateY(-2px);
        }

        .btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
            opacity: 0.7;
        }

        /* Secondary Button (Hint) */
        .btn-secondary {
            background-color: #fff;
            color: var(--primary);
            border: 2px solid var(--primary);
            box-shadow: none;
            padding: 8px 20px;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }
        .btn-secondary:hover {
            background-color: #fff0f3;
        }

        /* --- Puzzle Grid (2x2) --- */
        #puzzle-board {
            display: grid;
            grid-template-columns: repeat(2, 1fr); /* Changed to 2 columns */
            grid-template-rows: repeat(2, 1fr);    /* Changed to 2 rows */
            gap: 8px;
            width: 100%;
            aspect-ratio: 1 / 1; 
            margin-bottom: 20px;
            padding: 10px;
            background: #ffe5ec;
            border-radius: 15px;
        }

        /* --- Puzzle Piece --- */
        .piece {
            width: 100%;
            height: 100%;
            background-size: 200% 200%; /* Changed for 2x2 grid */
            background-repeat: no-repeat;
            border-radius: 12px;
            cursor: pointer;
            position: relative;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            
            /* 3D Depth Effect */
            border: 2px solid rgba(255,255,255,0.6);
            box-shadow: 
                inset 3px 3px 6px rgba(255,255,255,0.7),
                inset -3px -3px 6px rgba(0,0,0,0.1),
                4px 4px 8px rgba(0,0,0,0.15);
        }

        .piece:hover {
            transform: scale(0.98);
        }

        .piece.selected {
            border: 3px solid var(--primary);
            box-shadow: 0 0 15px var(--primary);
            transform: scale(1.05);
            z-index: 10;
        }

        .piece.correct-flash {
            animation: flashSuccess 0.5s ease;
        }

        /* --- Sections Visibility --- */
        .screen {
            display: none;
            width: 100%;
            flex-direction: column;
            align-items: center;
            animation: fadeIn 0.8s ease;
        }

        .screen.active {
            display: flex;
        }

        .note-box {
            background: #fff0f3;
            border-left: 5px solid var(--primary);
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 10px 10px 0;
            font-style: italic;
            display: none;
        }

        .final-img {
            width: 100%;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            margin-bottom: 20px;
        }

        /* --- Modal for Hints --- */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        }
        
        .modal-content {
            background: white;
            padding: 15px;
            border-radius: 15px;
            max-width: 90%;
            max-height: 90%;
            text-align: center;
            position: relative;
        }

        .modal-content img {
            max-width: 100%;
            max-height: 70vh;
            border-radius: 10px;
            display: block;
            margin-bottom: 15px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes flashSuccess {
            0% { filter: brightness(1); }
            50% { filter: brightness(1.5); }
            100% { filter: brightness(1); }
        }

        @media (max-width: 400px) {
            h1 { font-size: 1.8rem; }
            #game-container { padding: 20px; }
        }
    </style>
</head>
<body>

    <div id="hint-modal" class="modal-overlay">
        <div class="modal-content">
            <h3 style="margin-bottom: 10px; color: var(--primary);">Here is the goal:</h3>
            <img id="hint-img" src="" alt="Hint">
            <button class="btn" onclick="game.closeHint()">Close</button>
        </div>
    </div>

    <div id="game-container">
        
        <div id="intro-screen" class="screen active">
            <h1>My Dearest Remi</h1>
            <p>
                You're about to play a game I built for you called "I have the most beautiful life with you". 
                It's a puzzle game where you re-arrange Disney-style avatars of fun moments we shared together.
            </p>
            <p>
                It's Disney-styled because my life with you is a fantasy that always gets better. 
                I want you to know that our lives are easy and filled with love ‚Äî there's nothing our true love cannot overcome.
            </p>
            <p>
                I love you and I can't wait to knock you off your feet with even better moments and fantasies everyday of our lives.
            </p>
            <button class="btn" onclick="game.startGame()">Play Game ‚ù§Ô∏è</button>
        </div>

        <div id="level-screen" class="screen">
            <h2 id="level-title">Moment 1</h2>
            
            <button class="btn btn-secondary" onclick="game.showHint()">Show Hint üí°</button>

            <div id="puzzle-board">
                </div>

            <button id="submit-btn" class="btn" disabled onclick="game.submitLevel()">Submit Puzzle</button>

            <div id="success-note" class="note-box">
                <p id="note-text">Note goes here...</p>
                <button class="btn" onclick="game.nextLevel()">Play Next ‚ûî</button>
            </div>
        </div>

        <div id="outro-screen" class="screen">
            <h1>Happy Valentine's Day!</h1>
            <p>
                My beautiful woman, puzzle time is over, but the game of our lives is always on. 
                I enjoy playing it with you and I want to enjoy it and win at it with you.
            </p>
            <img src="https://yemijohnson.com/wp-content/uploads/2026/02/night-out.jpg" alt="Us" class="final-img">
            <p>I love you.</p>
        </div>

    </div>

    <script>
        // --- Game Data ---
        const levels = [
            {
                title: "Moment 1",
                img: "https://yemijohnson.com/wp-content/uploads/2026/02/introduction.jpg",
                note: "This is us on our Introduction. The happiness I felt on this day was intense. I think I felt like I finally became a man on this day. Thank you for giving me this moment."
            },
            {
                title: "Moment 2",
                img: "https://yemijohnson.com/wp-content/uploads/2026/02/wedding-day.jpg",
                note: "This was our wedding day. This picture in the car was one of my favorite pictures of the day. Getting married to you was the most life-changing thing that ever happened to me and I am grateful."
            },
            {
                title: "Moment 3",
                img: "https://yemijohnson.com/wp-content/uploads/2026/02/Yemis-birthday-.jpg",
                note: "I had no plans for this birthday, but it turned out to be my favorite in a long time. I was most especially not expecting the curated gifts you got for me. It made me feel super-special + the cake stole my heart away. Thank you."
            },
            {
                title: "Moment 4",
                img: "https://yemijohnson.com/wp-content/uploads/2026/02/abraka-resort.jpg",
                note: "You know how I feel about this picture. I rest my case :)"
            },
            {
                title: "Moment 5",
                img: "https://yemijohnson.com/wp-content/uploads/2026/02/at-nike-shop.jpg",
                note: "You made me buy the Nike short at this store and it is one of my favorite buys. This is just one of the ways you have changed my taste forever. Even though I might squeeze my face sometimes, I love it. Plus the selfie we took at this store is now my wallpaper. We need to create a new wallpaper for me ahead of 2027."
            },
            {
                title: "Moment 6",
                img: "https://yemijohnson.com/wp-content/uploads/2026/02/random-saturday.jpg",
                note: "This was a random Saturday that had started out hard with all the to-dos I had been piling up, but you came over to play with me and made it lighter. Thank you."
            },
            {
                title: "Moment 7",
                img: "https://yemijohnson.com/wp-content/uploads/2026/02/swimming-at-mauritius-resort.jpg",
                note: "I loved our vacation in Mauritius and now I only want to have the most luxurious vacations with you. I can't wait to do with you every quarter :)"
            },
            {
                title: "Moment 8",
                img: "https://yemijohnson.com/wp-content/uploads/2026/02/sunny-day-in-mauritius-1.jpg",
                note: "I don't remember what was happening here, but it seems like enjoyment wanted to kill us and we took a break to relax. I want to enjoy life with you till the end of time. You're everything for me."
            }
        ];

        // --- Game Logic ---
        const game = {
            currentLevelIndex: 0,
            pieces: [], // Stores current state of the board [0,1,2...]
            selectedPieceIndex: null,
            
            elements: {
                intro: document.getElementById('intro-screen'),
                level: document.getElementById('level-screen'),
                outro: document.getElementById('outro-screen'),
                board: document.getElementById('puzzle-board'),
                title: document.getElementById('level-title'),
                noteBox: document.getElementById('success-note'),
                noteText: document.getElementById('note-text'),
                submitBtn: document.getElementById('submit-btn'),
                modal: document.getElementById('hint-modal'),
                hintImg: document.getElementById('hint-img')
            },

            startGame() {
                this.switchScreen('level');
                this.loadLevel(0);
            },

            switchScreen(screenName) {
                document.querySelectorAll('.screen').forEach(el => el.classList.remove('active'));
                this.elements[screenName].classList.add('active');
            },

            loadLevel(index) {
                this.currentLevelIndex = index;
                const levelData = levels[index];
                
                // UI Reset
                this.elements.title.innerText = levelData.title;
                this.elements.noteBox.style.display = 'none';
                this.elements.submitBtn.style.display = 'inline-block';
                this.elements.submitBtn.disabled = true;
                this.elements.board.style.pointerEvents = 'auto';
                this.elements.board.innerHTML = '';
                this.selectedPieceIndex = null;

                // Create shuffled pieces
                // 2x2 grid = [0, 1, 2, 3]
                let initialArr = [0, 1, 2, 3];
                
                // Shuffle until it's NOT solved by accident
                do {
                    this.shuffleArray(initialArr);
                } while (this.isSolved(initialArr));

                this.pieces = initialArr;
                this.renderBoard(levelData.img);
            },

            renderBoard(imgUrl) {
                this.elements.board.innerHTML = '';
                
                this.pieces.forEach((pieceId, index) => {
                    const el = document.createElement('div');
                    el.classList.add('piece');
                    el.style.backgroundImage = `url('${imgUrl}')`;
                    
                    // Calculate background position based on the PIECE ID (the image chunk)
                    // 2x2 grid logic: 
                    // Col = id % 2, Row = Math.floor(id / 2)
                    // Multiplier is 100% because there are only 2 columns/rows (0% and 100%)
                    const col = pieceId % 2;
                    const row = Math.floor(pieceId / 2);
                    
                    el.style.backgroundPosition = `${col * 100}% ${row * 100}%`;
                    
                    // Click Event
                    el.onclick = () => this.handlePieceClick(index);
                    
                    this.elements.board.appendChild(el);
                });
            },

            handlePieceClick(clickedIndex) {
                const pieceElements = document.querySelectorAll('.piece');

                // If clicking the same piece, deselect
                if (this.selectedPieceIndex === clickedIndex) {
                    pieceElements[clickedIndex].classList.remove('selected');
                    this.selectedPieceIndex = null;
                    return;
                }

                // If nothing selected, select this one
                if (this.selectedPieceIndex === null) {
                    this.selectedPieceIndex = clickedIndex;
                    pieceElements[clickedIndex].classList.add('selected');
                } else {
                    // Swap logic
                    this.swapPieces(this.selectedPieceIndex, clickedIndex);
                    
                    // Remove styling
                    pieceElements[this.selectedPieceIndex].classList.remove('selected');
                    this.selectedPieceIndex = null;
                    
                    // Check validity
                    this.checkPuzzleState();
                }
            },

            swapPieces(indexA, indexB) {
                // Swap in data array
                const temp = this.pieces[indexA];
                this.pieces[indexA] = this.pieces[indexB];
                this.pieces[indexB] = temp;

                // Re-render
                this.renderBoard(levels[this.currentLevelIndex].img);
            },

            checkPuzzleState() {
                const solved = this.isSolved(this.pieces);
                this.elements.submitBtn.disabled = !solved;
            },

            isSolved(arr) {
                for (let i = 0; i < arr.length; i++) {
                    if (arr[i] !== i) return false;
                }
                return true;
            },

            submitLevel() {
                if (!this.isSolved(this.pieces)) return;

                const levelData = levels[this.currentLevelIndex];
                
                // Visual feedback
                document.querySelectorAll('.piece').forEach(p => p.classList.add('correct-flash'));
                this.elements.board.style.pointerEvents = 'none'; // Lock board
                
                // Hide submit, show note
                this.elements.submitBtn.style.display = 'none';
                this.elements.noteText.innerText = levelData.note;
                
                // Small delay for animation
                setTimeout(() => {
                    this.elements.noteBox.style.display = 'block';
                }, 300);
            },

            nextLevel() {
                const nextIdx = this.currentLevelIndex + 1;
                if (nextIdx < levels.length) {
                    this.loadLevel(nextIdx);
                } else {
                    this.switchScreen('outro');
                }
            },

            shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
            },

            // --- Hint System ---
            showHint() {
                const currentImg = levels[this.currentLevelIndex].img;
                this.elements.hintImg.src = currentImg;
                this.elements.modal.style.display = 'flex';
            },

            closeHint() {
                this.elements.modal.style.display = 'none';
            }
        };

    </script>
</body>
</html>
